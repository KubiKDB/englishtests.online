<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Language Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            max-width: 800px;
            padding: 10px;
            align-items: center;
        }
        .question {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .passage {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #444;
            border-radius: 5px;
            background-color: #e3f2fd;
        }
        .submit-btn {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        .submit-btn:hover {
            background-color: #45a049;
        }
        .result {
            margin-top: 20px;
            font-weight: bold;
        }
        /* Add these styles to your body and html elements */
        html, body {
          height: 100%;
          margin: 0;
        }

        /* Main content area that will grow to push footer down */
        main {
          flex: 1 0 auto; /* This makes the main content expand */
        }

        /* Header styling for horizontal alignment */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            margin-bottom: 20px;
        }
        
        /* Center title and adjust width */
        .header h2 {
            margin: 0;
            text-align: center;
            flex-grow: 1;
        }

        /* Home button */
        .home-button {
            width: 44px;
            height: 44px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            position: relative;
            z-index: 20;
            border-radius: 50%;
            transition: background-color 0.3s;
            text-decoration: none;
        }

        .home-button:hover {
            background-color: rgba(52, 152, 219, 0.1);
        }

        /* New SVG Home Icon with primary color */
        .home-icon {
            width: 24px;
            height: 24px;
            fill: #3498DB;
            transition: fill 0.3s;
        }

        .home-button:hover .home-icon {
            fill: #2980b9;
        }

        
    /* Footer Styling */
    .footer {
        background-color: #ffffff;
        color: #000000;
        text-align: bottom;
        padding: 5px;
        margin-top: 50px;
/*         width: 100%; */
        max-width: 800px;
        flex-shrink: 0;
    }
    
    .footer-content {
        max-width: 600px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    
    .footer p {
        margin: 5px 0;
        font-size: 1.1em;
        font-weight: 300;
    }
    
    .footer-email {
        color: #3498db; /* blue color for the email link */
        text-decoration: none;
        transition: color 0.3s ease;
    }
    
    .footer-email:hover {
        color: #2980b9; /* darker blue on hover */
        text-decoration: underline;
    }
    
    .footer-spacer {
        height: 30px;
        width: 100%;
    }
    
    .footer-made {
        margin-top: 10px;
    }
    
    .footer-maker {
        font-size: 1.3em;
    }
    </style>
</head>
<body>
    <div class="header">
        <a href="javascript:history.back()" class="home-button">
            <svg width="36" height="30" viewBox="0 0 36 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0.585786 13.5858C-0.195262 14.3668 -0.195262 15.6332 0.585786 16.4142L13.3137 29.1421C14.0948 29.9232 15.3611 29.9232 16.1421 29.1421C16.9232 28.3611 16.9232 27.0948 16.1421 26.3137L4.82843 15L16.1421 3.68629C16.9232 2.90524 16.9232 1.63891 16.1421 0.857864C15.3611 0.0768158 14.0948 0.0768158 13.3137 0.857864L0.585786 13.5858ZM34 13L2 13V17L34 17V13Z" fill="#3498DB"/>
                <circle cx="34" cy="15" r="2" fill="#3498DB"/>
            </svg>
        </a>
        <h2>English Language Test</h2>
        <a href="https://englishtests.online/" class="home-button">
            <svg class="home-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                <path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/>
            </svg>
        </a>
    </div>
    <div id="passageContainer"></div> <form id="quizForm"></form>
    <button type="submit" class="submit-btn" id="submitBtn">Submit</button>
    <div id="result" class="result"></div>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const levelValue = urlParams.get('level');
        const iValue = parseInt(levelValue, 10);
        const diffValue = urlParams.get('diff');

        document.querySelector('h2').textContent = `${diffValue} — test ${iValue}`;

        fetch(`json/${diffValue}/test${iValue}.json`) // Path to your JSON file
            .then(response => {
                console.log("Response Status:", response.status);
                return response.json();
            })
            .then(data => {
                console.log("JSON Data:", data);

                const passageText = data.passage;
                const questions = data.questions;

                const form = document.getElementById("quizForm");
                let passageAdded = false; // Initialize passageAdded to false

                questions.forEach((q, index) => {
                    // Add passage before question 41
                    if (q.id === 41 && !passageAdded) {
                        const passageDiv = document.createElement("div");
                        passageDiv.classList.add("passage");
                        passageDiv.innerHTML = `<strong>Reading Passage:</strong><br>${passageText}`;
                        form.appendChild(passageDiv); // Append passage to the form *before* question 41
                        passageAdded = true; // Set passageAdded to true so it's not added again
                    }

                    console.log("Processing Question:", q.id);

                    const questionDiv = document.createElement("div");
                    questionDiv.classList.add("question");

                    const questionText = document.createElement("p");
                    questionText.innerHTML = `<strong>${index + 1}. ${q.question}</strong>`;
                    questionDiv.appendChild(questionText);

                    Object.entries(q.options).forEach(([key, value]) => {
                        const input = document.createElement("input");
                        input.type = "radio";
                        input.name = `q${q.id}`;
                        input.value = key;

                        const label = document.createElement("label");
                        label.innerHTML = ` ${key}) ${value}<br>`;

                        questionDiv.appendChild(input);
                        questionDiv.appendChild(label);
                    });

                    form.appendChild(questionDiv);
                });

                document.getElementById("submitBtn").addEventListener("click", function(event) {
                    event.preventDefault();

                    let score = 0;
                    let total = questions.length;
                    let resultText = "<h3>Results:</h3>";

                    questions.forEach(q => {
                        let selected = document.querySelector(`input[name="q${q.id}"]:checked`);
                        if (selected) {
                            if (selected.value === q.correct_answer) {
                                score++;
                                resultText += `<p>Question ${q.id}: Correct ✅</p>`;
                            } else {
                                resultText += `<p>Question ${q.id}: Incorrect ❌ (Correct: ${q.correct_answer})</p>`;
                            }
                        } else {
                            resultText += `<p>Question ${q.id}: No answer selected ❌ (Correct: ${q.correct_answer})</p>`;
                        }
                    });

                    resultText += `<p><strong>Your Score: ${score} / ${total}</strong></p>`;
                    document.getElementById("result").innerHTML = resultText;
                });
            })
            .catch(error => {
                console.error('Error loading questions:', error);
                console.error("Fetch Error Details:", error);
            });
    </script>
    <footer class="footer">
    <div class="footer-content">
        <p>© Copyright 2025</p>
        <p><a href="mailto:info@englishtests.online" class="footer-email">info@englishtests.online</a></p>
        <p>All rights reserved</p>        
        <p class="footer-made">Made by <a href="https://englishtests.online/findword" class="footer-email">KubiKDB</a></p>
    </div>
    </footer>
</body>
</html>
